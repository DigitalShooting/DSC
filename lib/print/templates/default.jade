

- function formatTime(dateString){
	- var date = new Date(dateString);
	- return (date.getHours()<10?'0':'') + date.getHours()+':'+(date.getMinutes()<10?'0':'') + date.getMinutes()+':'+(date.getSeconds()<10?'0':'') + date.getSeconds();
- }

//- - function formatDate(dateString){
//- 	- var date = new Date(dateString);
//- 	- var d = date.getDate();
//- 	- var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
//- 	- var m = monthNames[date.getMonth()];
//- 	- var y = date.getFullYear();
//- 	- return d+' '+m+' '+y;
//- - }


- function formatDuration(totalSeconds){
	- totalSeconds = Math.round(totalSeconds)
	
	- var h = Math.floor(totalSeconds / 3600);
	- if (h > 0) h = h + " h "
	- else {h = ""}
	
	- totalSeconds = totalSeconds % 3600;
	
	- var m = Math.floor(totalSeconds / 60);
	- if (m > 0) m = m + " min "
	- else {m = ""}
	
	- var s = totalSeconds % 60;
	- if (s > 0) s = s + " sec"
	- else {s = ""}
	
	- return h+m+s;
- }



mixin gesamt(session)
	|\begin{minipage}[t]{1.0\textwidth}\vspace{10pt}
	|	\begin{tabularx}{\textwidth}{@{}l *9{>{\centering\arraybackslash}X}@{}}
	|		\multicolumn{8}{c}{\textbf{Gesamt}} \\
	|		\toprule
	|		Anzahl & Ringe & Schnitt & Innenzehner & Bester Teiler & 9.9er & 10.0er & Zeit \\
	|		\midrule
	|		#{session.anzahl} & \textbf{#{session.gesamt}} & #{session.schnitt} \O & #{session.counts.innenZehner} & #{session.bestTeiler} & #{session.counts.neunNeun} & #{session.counts.zehnNull} & #{formatDuration(session.duration)} \\
	|		\bottomrule
	|	\end{tabularx}
	|\end{minipage}
	|\newline



mixin serie(session, serie, index)
	|\begin{minipage}[t]{.48\textwidth}\vspace{10pt}
	|	\begin{tabular*}{\textwidth}{c|c|c|c|c @{\extracolsep{\fill}} c}
	|		\multicolumn{6}{c}{\textbf{#{index+1}. Serie}} \\
	|		\toprule
	|		Nr & Ring & Winkel & Teiler & Zeit & Grafik \\
	|		\midrule
	
	each shot, index in serie.shots
		|#{ shot.number}. & #{shot.ring.display} & \rotatebox[origin=c]{#{shot.winkel}}{$\rightarrow$} \SI{ #{shot.winkel} }{\degree} & #{shot.teiler} & #{formatTime(shot.time)} &
		- if (index == 0)
			|\multirow{0}[0]{*}{
			|\begin{minipage}{.3\textwidth}
			|	\centering
			|	\includegraphics[height=2.3cm, keepaspectratio]{scheibe_#{session.index}_#{serie.index}.pdf}
			|\end{minipage} }
			| \\
		- else
			| \\
	
	- var i = serie.shots.length
	- var min = session.disziplin.parts[session.type].serienLength
	- if (min < 8) {min = 8}
	- if (min > 10) {min = 10}
	while i < min
		|\\
		- i++
	
	|		\hline
	|		#{serie.anzahl} & #{serie.gesamt} Ringe & &  & #{formatDuration(serie.duration)} & #{serie.schnitt} \O \\
	|		\bottomrule
	|	\end{tabular*}
	|\end{minipage}
	|\hfill



mixin session(session, index)
	- if (index == 0)
		|\ihead{#{line.title}\\ \today}
		|\ohead{#{session.user.verein} #{session.user.manschaft}\\ #{session.user.firstName} #{session.user.lastName}}
		
		| \section*{#{session.disziplin.title}}

	|\subsection*{ #{session.disziplin.parts[session.type].title} }
	+gesamt(session)
	each serie, index in session.serien
		+serie(session, serie, index)
	|\vspace{1cm}







|\documentclass[a4paper,8pt]{scrartcl}
|\usepackage[
|	top    = 2.50cm,
|	bottom = 1.50cm,
|	left   = 1.00cm,
|	right  = 1.00cm
|]{geometry}

|\usepackage{scrpage2}
|\pagestyle{scrheadings}
|\usepackage[utf8]{inputenc}
|\usepackage[ngerman]{babel}
|\usepackage{pdfpages}
|\usepackage{siunitx}
|\usepackage{booktabs,lipsum,calc}
|\usepackage{multirow}
|\usepackage{graphicx}
|\usepackage{float}
|\usepackage{lmodern}
|\usepackage{tabularx}
|\usepackage{titlesec}

|\titlespacing*{\section} {0pt}{2.5ex plus 1ex minus .2ex}{1.3ex plus .2ex}
|\titlespacing*{\subsection} {0pt}{2.25ex plus 1ex minus .2ex}{-5.0ex plus .2ex}


|\begin{document}

each session, index in data.sessionParts
	+session(session, index)

|\end{document}
